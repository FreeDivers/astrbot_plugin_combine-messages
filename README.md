# 消息合并插件

本插件由 Cursor 辅助制作，旨在通过合并来自同一用户的连续消息来减少消息刷屏，尤其是在用户快速发送多条短消息或图文消息时。合并后的消息将作为单条消息发送给 LLM 进行处理。

欢迎大家使用并提出宝贵的意见，我会认真查看并改进的。

## 功能

- **自动合并**: 自动合并来自同一用户在短时间内的连续消息。
- **支持多种消息类型**: 支持合并文本和图片消息。
- **动态配置**: 您可以通过指令随时启用/禁用消息合并功能，并调整合并参数。
- **防止处理命令**: 自动忽略以 `/`, `!`, `.` 等符号开头的命令消息，避免干扰其他插件。

## 展示
![1](https://fultal.qinyan.org/Snipaste_2025-05-03_19-11-43.png)
![2](https://fultal.qinyan.org/Snipaste_2025-05-03_19-13-00.png)


## 更新日志

### v1.3
- 合并 [pr#7](https://github.com/FreeDivers/astrbot_plugin_combine-messages/pull/7)，新增 webui 配置面板

### v1.2
- 优化代码
- 修复图片消息的合并问题

### v1.1
- 增加了与 `astrbot_plugin_InitiativeDialogue` 插件的兼容性
- 新增对缺失 `message_id` 属性的消息处理能力，自动生成唯一标识
- 优化日志输出，提高调试能力
- 提高插件整体稳定性
- 增强了与各种平台适配器的兼容性，特别是 aiocqhttp
- 添加初始强制延迟机制，解决快速连续发送消息时丢失早期消息的问题
- 优化消息处理流程，提高合并稳定性
- 增强消息拦截机制，确保被合并的消息不会被误处理
- 新增 `/combine_delay` 命令，允许用户调整初始延迟时间

### v1.0
- 首次发布

